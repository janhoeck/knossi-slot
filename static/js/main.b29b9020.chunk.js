(this["webpackJsonpknossi-slot"]=this["webpackJsonpknossi-slot"]||[]).push([[0],{22:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(16),i=n.n(r),c=(n(22),n(4)),s=n(7),l=n(2),u=Object(a.createContext)({}),m=function(e){var t=e.children,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Object(a.useState)(e),n=Object(s.a)(t,2),o=n[0],r=n[1],i=function(e){return r((function(t){return t+e}))},c=function(e){return r((function(t){return t-e}))};return{money:o,setMoney:r,increaseMoney:i,decreaseMoney:c}}(e.initialMoney);return Object(l.jsx)(u.Provider,{value:n,children:t})},b={spacing:8,palette:{common:{white:"#fff",black:"#000",border:"#d6f2f4"},primary:{light:"#7ae7db",main:"#249ab3",dark:"#0a455d"},background:{default:""}}},d=n(3),j=n(10),f=n.n(j),p=n(13),O=[{value:"KNOSSI",weight:2,image:n.p+"static/media/knossi.8439d885.png"},{value:"SASCHA",weight:1,image:n.p+"static/media/sascha.67d054ea.png"},{value:"MANNY_MARC",weight:1,image:n.p+"static/media/mannymarc.67aeda60.png"},{value:"SIDO",weight:2,image:n.p+"static/media/sido.9c8b4f75.png"}],h=function(){for(var e=[],t=0;t<O.length;t++)for(var n=0;n<O[t].weight;n++)e.push(t);var a=e[Math.floor(Math.random()*e.length)];return O[a]},g=function(e,t){for(var n=[],a=0;a<e+5;a++)for(var o=0;o<t;o++){Array.isArray(n[o])||(n[o]=[]);var r=h();n[o][a]=Object(d.a)(Object(d.a)({},r),{},{rowIndex:a,columnIndex:o})}return n},v=function(e,t){for(var n=0;n<e.length;n++)for(var a=e[n],o=0;o<a.length;o++)t(n,o)},y=function(e){var t=e[0].value;return e.every((function(e){return e.value===t}))},x=function(e,t,n){for(var a=[],o=function(t){var n=[];v(e,(function(a,o){t===o&&n.push(e[a][o])})),y(n)&&a.push(n)},r=0;r<t;r++)o(r);var i=[];return v(e,(function(a,o){var r=e[a][o];a!==o?o!==t-1&&n/2<=a&&(a-o)%2===0&&i.push(r):i.push(r)})),y(i)&&a.push(i),a},w=Object(a.createContext)({}),S=function(e){var t=e.children,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=Object(a.useRef)(),o=Object(a.useState)(1),r=Object(s.a)(o,2),i=r[0],c=r[1],l=Object(a.useState)(!1),u=Object(s.a)(l,2),m=u[0],b=u[1],d=Object(a.useState)(!1),j=Object(s.a)(d,2),O=j[0],h=j[1],v=Object(a.useState)(g(e,t)),y=Object(s.a)(v,2),w=y[0],S=y[1],N=Object(a.useState)(),k=Object(s.a)(N,2),A=k[0],I=k[1],C=Object(a.useState)([]),M=Object(s.a)(C,2),R=M[0],W=M[1],P=Object(a.useCallback)((function(e){n.current=e}),[]),B=Object(a.useCallback)(Object(p.a)(f.a.mark((function a(){var o,r,i;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(I(void 0),W([]),!(o=n.current)){a.next=12;break}return r=g(e,t),S(r),b(!0),a.next=9,o.spin(r);case 9:i=a.sent,b(!1),W(x(i,e,t));case 12:case"end":return a.stop()}}),a)}))),[e,t]);return{winningSymbols:R,lastAmountOfProfit:A,moneyStake:i,setMoneyStake:c,isSpinning:m,setSpinning:b,isAutoSpinMode:O,setAutoSpinMode:h,symbolsMap:w,registerSlot:P,spin:B,rowsAmount:e,columnsAmount:t}}(e.rows,e.columns);return Object(l.jsx)(w.Provider,{value:n,children:t})},N=function(){return Object(a.useContext)(w)},k=n(6),A=n(5),I=n(9),C=Object(c.b)((function(e){return{root:{padding:e.spacing,display:"flex",alignItems:"center",justifyContent:"center",background:e.palette.primary.dark,border:"2px solid ".concat(e.palette.common.border),cursor:"pointer",color:e.palette.common.white,"&:focus":{outline:"none"}},disabled:{backgroundColor:"#6e7b9e"}}}),{name:"Button"}),M=function(e){var t=e.className,n=e.classes,a=e.children,o=e.disabled,r=Object(k.a)(e,["className","classes","children","disabled"]),i=C(Object(d.a)(Object(d.a)({},e),{},{classes:n}));return Object(l.jsx)("button",Object(d.a)(Object(d.a)({className:Object(A.a)(t,i.root,Object(I.a)({},i.disabled,o)),disabled:o},r),{},{children:a}))},R=Object(c.b)({root:{borderRadius:"100%",width:40,height:40}},{name:"RoundButton"}),W=function(e){var t=e.className,n=e.classes,a=e.children,o=Object(k.a)(e,["className","classes","children"]),r=R(Object(d.a)(Object(d.a)({},e),{},{classes:n}));return Object(l.jsx)(M,Object(d.a)(Object(d.a)({className:Object(A.a)(t,r.root)},o),{},{children:a}))},P=n(11),B=Object(c.b)((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"center"},icon:{fontSize:"2rem"},button:{width:30,height:30},container:{textAlign:"center",padding:e.spacing,border:"2px solid ".concat(e.palette.common.border),borderRadius:4,background:e.palette.primary.dark,color:e.palette.common.white,margin:"0px ".concat(e.spacing,"px"),width:150}}}),{name:"MoneyStakeAction"}),z=function(e){var t=e.className,n=e.moneyStake,a=e.increase,o=e.decrease,r=e.decreaseDisabled,i=e.increaseDisabled,c=B(e);return Object(l.jsxs)("div",{className:Object(A.a)(c.root,t),children:[Object(l.jsx)(W,{className:c.button,disabled:r,onClick:o,children:Object(l.jsx)(P.a,{className:c.icon})}),Object(l.jsxs)("div",{className:c.container,children:[n.toFixed(2)," \u20ac"]}),Object(l.jsx)(W,{className:c.button,disabled:i,onClick:a,children:Object(l.jsx)(P.c,{className:c.icon})})]})},D=Object(c.b)((function(e){return{root:{height:80,width:80,border:"4px solid ".concat(e.palette.common.border),zIndex:2},icon:{fontSize:"1rem"}}}),{name:"SpinAction"}),T=function(e){var t=e.className,n=Object(k.a)(e,["className"]),a=D(e);return Object(l.jsx)(W,Object(d.a)(Object(d.a)({className:Object(A.a)(a.root,t)},n),{},{children:Object(l.jsx)(P.b,{className:a.icon})}))},G=Object(c.b)((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",padding:e.spacing,border:"2px solid ".concat(e.palette.common.border),borderRadius:4,background:e.palette.primary.dark,color:e.palette.common.white,margin:"0px ".concat(e.spacing,"px"),width:150}}}),{name:"MoneyStakeAction"}),E=function(e){var t=e.className,n=e.balance,a=G(e);return Object(l.jsxs)("div",{className:Object(A.a)(a.root,t),children:[n.toFixed(2)," \u20ac"]})},F=Object(c.b)((function(e){return{root:{width:"100%",background:e.palette.primary.main,position:"relative",padding:e.spacing,display:"flex",height:60,justifyContent:"space-between"},autoSpinAction:{},spinAction:{position:"absolute",left:"50%",bottom:25}}}),{name:"SlotActionBar"}),H=function(e){var t=e.className,n=Object(k.a)(e,["className"]),o=F(e),r=N(),i=r.spin,c=r.isSpinning,s=r.moneyStake,m=r.setMoneyStake,b=Object(a.useContext)(u).money;return Object(l.jsxs)("div",Object(d.a)(Object(d.a)({className:Object(A.a)(o.root,t)},n),{},{children:[Object(l.jsx)(z,{moneyStake:s,increase:function(){m((function(e){return e<1?e+.1:e+1}))},decrease:function(){s<=.1||m(s>1?function(e){return e-1}:function(e){return e-.1})},decreaseDisabled:s<=.1||c,increaseDisabled:c}),Object(l.jsx)(T,{className:o.spinAction,disabled:c||b<s,onClick:i}),Object(l.jsx)(E,{balance:b})]}))};H.displayName="SlotActionBar";var $=Object(c.b)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",border:"4px solid ".concat(e.palette.common.white),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},text:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"3rem",color:e.palette.common.white},highlight:{animation:"$heartbeat 1s infinite"},"@keyframes heartbeat":{"0%":{transform:"scale(.90)"},"20%":{transform:"scale(1)"},"40%":{transform:"scale(.90)"},"60%":{transform:"scale(1)"},"80%":{transform:"scale(.90)"},"100%":{transform:"scale(.90)"}}}}),{name:"SlotItem"}),J=function(e){var t=e.className,n=e.symbol,a=$(e);return Object(l.jsx)("div",{className:Object(A.a)(t,a.root,Object(I.a)({},a.highlight,n.highlight)),style:{backgroundImage:'url("'.concat(n.image,'")')}})};J.displayName="SlotItem";var V=n.p+"static/media/spin-click-sound.033469a0.mp3",K=Object(c.b)({root:function(e){var t=e.width;return{width:t,left:e.index*t,transition:"bottom 0.1s ease-in-out",bottom:0}},slotItem:function(e){var t=e.width;return{width:t,height:t}}},{name:"SlotColumn"}),L=new Audio(V),Y=Object(a.forwardRef)((function(e,t){var n=e.className,o=(e.style,e.width),r=(e.index,e.slotSymbols),i=e.rowsAmount,c=Object(k.a)(e,["className","style","width","index","slotSymbols","rowsAmount"]),s=K(Object(d.a)(Object(d.a)({},e),{},{width:o})),u=Object(a.useRef)(null),m=function(e,t){var n=u.current;return new Promise((function(a){var r=0,c=setInterval((function(){r<=-o*(t.length-i)&&(r=0),r-=o,n&&(n.style.bottom="".concat(r,"px"))}),100);setTimeout((function(){clearInterval(c),L.play();var e=function(e,t,n,a){var o=-n/t;return Array.from({length:a}).map((function(t,n){var a=e.length-o-(n+1);return e[a]})).reverse()}(t,o,r,i);a(e)}),e)}))};return Object(a.useImperativeHandle)(t,(function(){return{spin:m,ref:u}})),Object(l.jsx)("div",Object(d.a)(Object(d.a)({className:Object(A.a)(s.root,n),ref:u},c),{},{children:r.map((function(e,t){return Object(l.jsx)(J,{className:s.slotItem,symbol:e},t)}))}))}));Y.displayName="SlotColumn";var _=Object(c.b)((function(e){return{root:{width:"100%",height:"100%"},canvas:{width:"100%",height:"100%"}}}),{name:"WinIndicatorItem"}),q=Object(a.memo)((function(e){var t=e.className,n=e.beforeWinningSymbol,o=e.winningSymbol,r=e.nextWinningSymbol,i=Object(k.a)(e,["className","beforeWinningSymbol","winningSymbol","nextWinningSymbol"]),c=_(e),s=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=s.current;if(e&&o){var t=e.getContext("2d");if(t){var a=null===n||void 0===n?void 0:n.rowIndex,i=o.rowIndex,c=null===r||void 0===r?void 0:r.rowIndex,l=e.getBoundingClientRect(),u=l.height,m=l.width,b=m/2,d=u/2;return console.log("height",u,"width",m,"xCenter",b,"yCenter",d),!a&&i===c||!c&&a===i?(t.beginPath(),t.lineWidth=10,t.moveTo(0,d),console.log("moveTo",0,d),t.lineTo(m,d),console.log("lineTo",m,d),void t.stroke()):void 0}}}),[s,n,o,r]),Object(l.jsx)("div",Object(d.a)(Object(d.a)({className:Object(A.a)(c.root,t)},i),{},{children:Object(l.jsx)("canvas",{className:c.canvas,ref:s})}))}));q.displayName="WinIndicatorItem";var Q=Object(c.b)((function(e){return{root:{width:"100%",height:"100%",display:"flex"},column:{display:"flex",flexDirection:"column",flex:1},item:{flex:1}}}),{name:"WinIndicatorGrid"}),U=Object(a.memo)((function(e){var t=e.className,n=e.columnAmount,a=e.rowAmount,o=e.winningSymbols,r=Object(k.a)(e,["className","columnAmount","rowAmount","winningSymbols"]),i=Q(e);return Object(l.jsx)("div",Object(d.a)(Object(d.a)({className:Object(A.a)(i.root,t)},r),{},{children:Array.from(Array(n).keys()).map((function(e,t){return Object(l.jsx)("div",{className:i.column,children:Array.from(Array(a).keys()).map((function(e,n){var a=function(e,t){return o.findIndex((function(n){return n.rowIndex===t&&n.columnIndex===e}))}(t,n);return Object(l.jsx)(q,{className:i.item,beforeWinningSymbol:o[a-1],winningSymbol:o[a],nextWinningSymbol:o[a+1]},n)}))},t)}))}))}));U.displayName="WinIndicatorGrid";var X=Object(c.b)({root:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",position:"relative",overflow:"hidden"},slotColumn:{position:"absolute"},winIndicatorGrid:{position:"absolute",zIndex:1}},{name:"Slot"}),Z=Object(a.forwardRef)((function(e,t){var n=e.className,o=e.symbolsMap,r=e.rowsAmount,i=e.columnsAmount,c=e.winningSymbols,u=Object(k.a)(e,["className","symbolsMap","rowsAmount","columnsAmount","winningSymbols"]),m=X(e),b=Object(a.useState)(0),j=Object(s.a)(b,2),O=j[0],h=j[1],g=Object(a.useRef)(null),v=Object(a.useRef)([]),y=function(e){return function(t){v.current[e]=t}},x=function(e){return new Promise(function(){var t=Object(p.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===O||0===v.current.length){t.next=5;break}return t.next=3,Promise.all(v.current.map((function(t,n){return t.spin(500+500*n,e[n])})));case 3:a=t.sent,n(a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())};return Object(a.useLayoutEffect)((function(){var e=g.current;e&&h(e.getBoundingClientRect().width/i)}),[g,i]),Object(a.useImperativeHandle)(t,(function(){return{spin:x,columnRefs:v}})),Object(l.jsxs)("div",Object(d.a)(Object(d.a)({className:Object(A.a)(m.root,n),ref:g,style:{height:O*r}},u),{},{children:[c.map((function(e,t){return Object(l.jsx)(U,{className:m.winIndicatorGrid,columnAmount:i,rowAmount:r,winningSymbols:e},t)})),o.map((function(e,t){return Object(l.jsx)(Y,{ref:y(t),className:m.slotColumn,index:t,width:O,rowsAmount:r,slotSymbols:e},t)}))]}))}));Z.displayName="Slot";var ee=Object(c.b)((function(e){return{root:{position:"absolute",zIndex:1,width:"100%",height:"100%"},amount:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"5em",fontWeight:"bold",animation:"$fade-out 4s forwards",color:e.palette.common.white,transition:"opacity 0.4s linear"},"@keyframes fade-out":{"0%":{opacity:1},"10%":{opacity:.9},"20%":{opacity:.8},"30%":{opacity:.7},"40%":{opacity:.6},"50%":{opacity:.5},"60%":{opacity:.4},"70%":{opacity:.3},"80%":{opacity:.2},"90%":{opacity:.1},"100%":{opacity:0,animationPlayState:"paused"}}}}),{name:"AmountOfProfitDisplay"}),te=function(e){var t=e.className,n=e.amount,a=ee(e);return Object(l.jsx)("div",{className:Object(A.a)(a.root,t),children:Object(l.jsxs)("span",{className:a.amount,children:["+ ",n.toFixed(2)," \u20ac"]})})};te.displayName="AmountOfProfitDisplay";var ne=Object(c.b)((function(e){return{root:{height:"100%",width:"100%",position:"relative",display:"flex",flexDirection:"column",backgroundColor:e.palette.primary.dark,overflow:"hidden"},slotContainer:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:2*e.spacing},slot:{width:"90%",maxWidth:1e3},actionBar:{}}}),{name:"SlotViewContent"}),ae=function(e){var t=e.className,n=Object(k.a)(e,["className"]),a=ne(),o=N(),r=o.registerSlot,i=o.symbolsMap,c=o.rowsAmount,s=o.columnsAmount,u=o.lastAmountOfProfit,m=o.winningSymbols;return Object(l.jsxs)("div",Object(d.a)(Object(d.a)({className:Object(A.a)(a.root,t)},n),{},{children:[Object(l.jsxs)("div",{className:a.slotContainer,children:[u&&Object(l.jsx)(te,{amount:u}),Object(l.jsx)(Z,{className:a.slot,ref:r,symbolsMap:i,winningSymbols:m,rowsAmount:c,columnsAmount:s})]}),Object(l.jsx)(H,{className:a.actionBar})]}))};ae.displayName="SlotViewContent";var oe=function(e){return Object(l.jsx)(S,{children:Object(l.jsx)(ae,Object(d.a)({},e))})},re=n(0),ie={size:"2em"},ce=function(){return Object(l.jsx)(c.a,{theme:b,children:Object(l.jsx)(m,{initialMoney:10,children:Object(l.jsx)(re.b.Provider,{value:ie,children:Object(l.jsx)(oe,{})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(ce,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.b29b9020.chunk.js.map